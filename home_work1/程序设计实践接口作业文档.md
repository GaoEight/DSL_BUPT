# 程序设计实践接口作业文档

采用 json 文件作为配置文件

## 配置文件字段说明

| 字段路径           | 类型                  | 是否一定需要填写 | 含义                  | 取值要求                           |
| ------------------ | --------------------- | ---------------- | --------------------- | ---------------------------------- |
| network.ip_address | string                | 是               | 协议栈绑定的 IP 地址  | IPv4 格式，比如 198.2.3.1          |
| network.port       | integer               | 是               | 协议栈绑定的端口号    | 计算机端口范围：1–65535，例如 8080 |
| device.device_id   | 64 bit 无符号 integer | 是               | 当前设备唯一标识符    | 需要与设备匹配，需要唯一           |
| protocol.type      | string                | 是               | 协议类型              | 只允许有`"tcp"` 或 `"udp"`两种类型 |
| protocol.crc       | bool                  | 是               | 是否启用 CRC 校验机制 | `true`：启用；`false`：关闭        |
| heartbeat          | object                | 否               | 心跳机制配置          | 可以不用设置，按作业要求默认值为 5 |
| heartbeat.sec      | integer               | 否               | 心跳间隔时间（秒）    | 取值范围 大于1 的整数 ，默认值 5   |

------

## 配置文件

### config_v1.json

在使用默认心跳下的配置文件。

文件中，说明了：
当前主机的 ipv4 地址：192.168.122.1/24

端口号：8080

设备id：1145141919810

协议种类：tcp

是否 crc 校验：是

```json
{
  "network": {
    "ip_address": "192.168.122.1/24", 
    "port": 8080
  },
  "device": {
    "device_id": 1145141919810
  },
  "protocol": {
    "type": "tcp",
    "crc": true
  }
}
```

### config_v2.json

相比于第一个配置文件，新增加了心跳间隔 heartbeat.sec 的配置，从而满足 “更改心跳间隔为 3 秒” 的要求

```json
{
  "network": {
    "ip_address": "192.168.122.1/24",
    "port": 8080
  },
  "device": {
    "device_id": 1145141919810
  },
  "protocol": {
    "type": "tcp",
    "crc": true
  },
  "heartbeat": {
    "sec": 3
  }
```

